---
title: DSL Root Schema
description: Complete specification of the Constela program structure
---

## Overview

Every Constela program is a single JSON object that follows a specific schema. This document describes the top-level structure that all Constela programs must adhere to.

```json
{
  "version": "1.0",
  "state": { ... },
  "actions": [ ... ],
  "view": { ... },
  "components": { ... }
}
```

## Root Properties

<PropsTable items={[
  { name: "version", type: "string", required: true, description: "DSL version identifier. Currently only \"1.0\" is supported." },
  { name: "state", type: "Record<string, StateField>", required: true, description: "Application state definitions. Keys are state names, values are field definitions." },
  { name: "actions", type: "ActionDefinition[]", required: true, description: "Array of action definitions that describe how state changes." },
  { name: "view", type: "ViewNode", required: true, description: "The root view node that describes the UI structure." },
  { name: "components", type: "Record<string, ComponentDef>", required: false, description: "Reusable component definitions. Keys are component names." }
]} />

## State Field Definition

Each state field specifies a type and initial value.

<PropsTable items={[
  { name: "type", type: "\"string\" | \"number\" | \"boolean\" | \"list\" | \"object\"", required: true, description: "The data type of the state field." },
  { name: "initial", type: "any", required: true, description: "The initial value. Must match the declared type." }
]} />

### Example State

```json
{
  "state": {
    "count": { "type": "number", "initial": 0 },
    "message": { "type": "string", "initial": "Hello" },
    "items": { "type": "list", "initial": [] },
    "user": { "type": "object", "initial": { "name": "", "age": 0 } },
    "isActive": { "type": "boolean", "initial": false }
  }
}
```

## Component Definition

Components allow you to create reusable UI pieces.

<PropsTable items={[
  { name: "params", type: "Record<string, ParamDef>", required: true, description: "Component parameter definitions with types and optional defaults." },
  { name: "view", type: "ViewNode", required: true, description: "The view tree for this component." }
]} />

### Param Definition

<PropsTable items={[
  { name: "type", type: "\"string\" | \"number\" | \"boolean\" | \"json\"", required: true, description: "The expected type of the parameter." },
  { name: "required", type: "boolean", required: false, default: "true", description: "Whether the parameter is required." }
]} />

### Example Component

```json
{
  "components": {
    "Button": {
      "params": {
        "label": { "type": "string" },
        "variant": { "type": "string" }
      },
      "view": {
        "kind": "element",
        "tag": "button",
        "props": {
          "class": { "expr": "param", "name": "variant" }
        },
        "children": [
          { "kind": "text", "value": { "expr": "param", "name": "label" } }
        ]
      }
    }
  }
}
```

## Complete Example

```json
{
  "version": "1.0",
  "state": {
    "count": { "type": "number", "initial": 0 }
  },
  "actions": [
    {
      "name": "increment",
      "steps": [
        { "do": "update", "target": "count", "operation": "increment" }
      ]
    }
  ],
  "view": {
    "kind": "element",
    "tag": "div",
    "children": [
      {
        "kind": "text",
        "value": { "expr": "state", "name": "count" }
      },
      {
        "kind": "element",
        "tag": "button",
        "props": {
          "onClick": { "event": "click", "action": "increment" }
        },
        "children": [
          { "kind": "text", "value": { "expr": "lit", "value": "+1" } }
        ]
      }
    ]
  }
}
```
